{"version":3,"sources":["panels/Home.js","vars/consts.js","hoc/StorageProvider.js","hook/useStorage.js","panels/Default/Default.js","panels/Profile/SignatureList.js","panels/Profile/MySignatures.js","panels/Profile/Profile.js","panels/NewSignature/NewSignature.js","panels/Privacy/Privacy.js","App.js","index.js"],"names":["Home","id","header","mode","stretched","size","server","declOfNum","n","titles","months","timestampToDays","timestamp","date","Date","getDate","getMonth","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","StorageContext","createContext","StorageProvider","children","useState","activePanel","setActivePanel","popout","setPopout","fetchedUser","setUser","launchParams","setLaunchParams","defaultParams","setDefaultParams","activeProfile","setActiveProfile","snack","setSnack","hideFriendsPlaceholder","setHideFriendsPlaceholder","alreadySet","setAlreadySet","useEffect","a","bridge","send","user","urlSearchParams","URLSearchParams","window","location","search","params","Object","fromEntries","entries","vk_has_profile_button","vk_profile_button_forbidden","vk_profile_id","Number","openProfile","fetch","method","body","JSON","stringify","req","ok","json","res","default","fetchData","userid","value","Provider","useStorage","useContext","Default","console","log","addToProfile","ttl","style","display","flexDirection","alignItems","justifyContent","textAlign","padding","src","photo_200","marginBottom","marginTop","level","weight","first_name","last_name","color","count","onClick","icon","width","height","action","SignatureList","signatures","share","map","sign","className","disabled","description","datetime","before","_from","photo","after","media","pic","name","text","MySignatures","setSignatures","load","setLoad","user_id","page","left","length","Profile","thisUser","setThisUser","profile","NewSignature","currentTab","setCurrentTab","fileLoad","setFileLoad","signValue","setSignValue","setMedia","setColor","active","setActive","thickness","setThickness","paint","setPaint","loadImage","then","img_base64","badLeave","onClose","goodLeave","post_signature","setTimeout","save","selected","top","bottom","placeholder","maxLength","onChange","e","currentTarget","sizeY","loading","controlSize","accept","files","onSave","image","type","defaultValue","min","max","Privacy","privacy","view_mode","viewmode","setViewMode","post_mode","postmode","setPostMode","edit_viewmode","local_defaultParams","edit_postmode","multi","data","friends","users","ids","f","App","scheme","setScheme","subscribe","detail","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0257a739.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Panel, PanelHeader, Header, Button, Group, Cell, Div, Avatar } from '@vkontakte/vkui';\n\nconst Home = ({ id }) => (\n\t<Panel id={id}>\n\t\t<PanelHeader>Example</PanelHeader>\n\n\t\t<Group header={<Header mode=\"secondary\">Navigation Example</Header>}>\n\t\t\t<Div>\n\t\t\t\t<Button stretched size=\"l\" mode=\"secondary\" data-to=\"persik\">\n\t\t\t\t\tShow me the Persik, please\n\t\t\t\t</Button>\n\t\t\t</Div>\n\t\t</Group>\n\t</Panel>\n);\n\nexport default Home;\n","export const server = 'https://vezdekodvkma.pythonanywhere.com/'\r\n\r\nexport function declOfNum(n, titles) {\r\n    return titles[n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2];\r\n}\r\n\r\nconst months = [\r\n    'января',\r\n    'февраля',\r\n    'марта',\r\n    'апреля',\r\n    'мая',\r\n    'июня',\r\n    'июля',\r\n    'августа',\r\n    'сентября',\r\n    'октября',\r\n    'ноября',\r\n    'декабря'\r\n]\r\n\r\nexport const timestampToDays = (timestamp) => {\r\n    let date = new Date(timestamp*1000)\r\n    return `${date.getDate()} ${months[date.getMonth()]}`\r\n}\r\n\r\nexport function getBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n        var reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function () {\r\n            resolve(reader.result);\r\n        };\r\n        reader.onerror = function (error) {\r\n            reject()\r\n        };\r\n    })\r\n }","import { ScreenSpinner } from \"@vkontakte/vkui\"\r\nimport { useState, useEffect, createContext } from \"react\"\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { server } from \"../vars/consts\";\r\n\r\nexport const StorageContext  = createContext(null)\r\n\r\nconst StorageProvider = ({children}) => {\r\n\r\n    const [activePanel, setActivePanel] = useState('default')\r\n    const [popout, setPopout] = useState(<ScreenSpinner size=\"large\"/>)\r\n    const [fetchedUser, setUser] = useState(null);\r\n    const [launchParams, setLaunchParams] = useState(null)\r\n    const [defaultParams, setDefaultParams] = useState(null)\r\n    const [activeProfile, setActiveProfile] = useState(null)\r\n    const [snack, setSnack] = useState(null)\r\n    const [hideFriendsPlaceholder, setHideFriendsPlaceholder] = useState(false)\r\n    const [alreadySet, setAlreadySet] = useState(true)\r\n\r\n    useEffect(() => {\r\n\r\n\t\tasync function fetchData() {\r\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\r\n\t\t\tsetUser(user);\r\n\r\n            let urlSearchParams = new URLSearchParams(window.location.search);\r\n            let params = Object.fromEntries(urlSearchParams.entries());\r\n            setLaunchParams(params)\r\n\r\n            if(params.vk_has_profile_button != '1'){\r\n                setAlreadySet(false)\r\n            }\r\n\r\n            if(params.vk_profile_button_forbidden == '1'){\r\n                setAlreadySet(false)\r\n            }\r\n\r\n            if(params.vk_profile_id && Number(params.vk_profile_id)){\r\n                if(Number(params.vk_profile_id) != user.id){\r\n                    openProfile(Number(params.vk_profile_id))\r\n                }\r\n            }\r\n\r\n            const req = await fetch(`${server}get_default`, {method:'POST', body:JSON.stringify(\r\n                {\r\n                    params:window.location.search\r\n                }\r\n            )})\r\n            if(req.ok){\r\n                const res = await req.json()\r\n                if(!res.error){\r\n                    setDefaultParams(res.default)\r\n                }\r\n            }\r\n\r\n            setPopout(null);\r\n\t\t}\r\n\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n    const openProfile = (userid) => {\r\n        setActiveProfile(userid)\r\n        setActivePanel('profile')\r\n    }\r\n\r\n    const value = {\r\n        activePanel, setActivePanel,\r\n        popout, setPopout,\r\n        fetchedUser, defaultParams, launchParams, setDefaultParams,\r\n        activeProfile, openProfile,\r\n        snack, setSnack,\r\n        hideFriendsPlaceholder, setHideFriendsPlaceholder,\r\n        alreadySet, setAlreadySet\r\n    }\r\n\r\n    return(\r\n        <StorageContext.Provider value = {value}>\r\n            {children}\r\n        </StorageContext.Provider>\r\n    )\r\n}\r\n\r\nexport default StorageProvider","import { useContext } from 'react'\r\nimport { StorageContext } from '../hoc/StorageProvider'\r\n\r\nexport const useStorage = () => {\r\n    return useContext(StorageContext)\r\n}","import { Avatar, Gradient, Group, Panel, PanelHeader, Title, Text, Placeholder, Button } from \"@vkontakte/vkui\"\r\nimport { useStorage } from \"../../hook/useStorage\"\r\nimport { declOfNum } from \"../../vars/consts\"\r\nimport { Icon56CancelCircleOutline, Icon56InfoOutline } from '@vkontakte/icons';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\n\r\nexport const Default = ({ id }) => {\r\n\r\n    let {\r\n        fetchedUser, defaultParams, launchParams,\r\n        setActivePanel, openProfile\r\n    } = useStorage()\r\n\r\n    console.log(fetchedUser)\r\n\r\n    const addToProfile = async () => {\r\n        bridge.send(\"VKWebAppAddToProfile\", {ttl: 0})\r\n    }\r\n\r\n    return(\r\n        <Panel id = {id}>\r\n            {/* <PanelHeader>Подписи</PanelHeader> */}\r\n            <Group>\r\n                {fetchedUser &&\r\n                <Gradient\r\n                style={{\r\n                    // margin: sizeX === SizeType.REGULAR ? \"-7px -7px 0 -7px\" : 0,\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    textAlign: \"center\",\r\n                    padding: 32,\r\n                  }}\r\n                >\r\n                    <Avatar size = {96} src = {fetchedUser.photo_200}/>\r\n                    <Title\r\n                    style={{ marginBottom: 8, marginTop: 20 }}\r\n                    level=\"2\"\r\n                    weight=\"2\"\r\n                    >\r\n                        {`${fetchedUser.first_name} ${fetchedUser.last_name}`}\r\n                    </Title>\r\n                    {defaultParams &&\r\n                    <Text style={{ marginBottom: 24, color: \"var(--text_secondary)\" }}>\r\n                        {`У вас ${defaultParams.count} ${declOfNum(defaultParams.count, ['автограф','автографа','автографов'])}`}\r\n                    </Text>\r\n                    }\r\n                    <Button onClick={()=>setActivePanel('my_signatures')} size=\"l\">Мои автографы</Button>\r\n                    <Button mode='tertiary'  onClick={()=>setActivePanel('privacy')} size=\"l\">Приватность</Button>\r\n                </Gradient>\r\n                }\r\n                {launchParams?.vk_has_profile_button != \"1\" &&\r\n                <Group mode=\"card\">\r\n                <Placeholder\r\n                icon = {<Icon56InfoOutline width={48} height = {48}/>}\r\n                action = {<Button\r\n                // onClick = {()=>{openProfile(296223969)}}\r\n                onClick = {addToProfile}\r\n                size = 'm'>Исправить это</Button>}\r\n                >\r\n                    Вы не добавили кнопку приложения в профиль, никто не сможет оставить вам автограф!\r\n                </Placeholder>\r\n                </Group>\r\n                }\r\n            </Group>\r\n        </Panel>\r\n    )\r\n}","import { Icon16Share } from \"@vkontakte/icons\"\r\nimport { Avatar, CardGrid, SimpleCell, Text, Card, IconButton } from \"@vkontakte/vkui\"\r\nimport { useStorage } from \"../../hook/useStorage\"\r\nimport { timestampToDays } from \"../../vars/consts\"\r\nimport './List.css'\r\nimport bridge from \"@vkontakte/vk-bridge\"\r\n\r\nexport const SignatureList = ({ signatures, share = false }) => {\r\n\r\n    function shareToHistory(pic){\r\n        bridge.send(\"VKWebAppShowStoryBox\", \r\n            {\r\n                \"background_type\": \"image\",\r\n                \"url\": \"https://sun3-12.userapi.com/impg/f1NJs1KHiykb-kUdZgCVpqu2iSbPGL94DP2TMw/XY7vfzdN1Zc.jpg?size=1440x2160&quality=96&sign=69a2748d55e248e87e0dd837abfabd86&type=album\",\r\n                \"stickers\": [\r\n                  {\r\n                    \"sticker_type\": \"renderable\",\r\n                    \"sticker\": {\r\n                      \"can_delete\": 0,\r\n                      \"content_type\": \"image\",\r\n                      \"url\": pic,\r\n                    }\r\n                  }\r\n                ]\r\n              }\r\n            );\r\n    }\r\n\r\n    return (\r\n        <CardGrid size=\"l\">\r\n            {signatures.map((sign)=>{\r\n                return(\r\n                    <Card\r\n                    key = {`${sign.datetime}`}\r\n                    className = 'card_sign'\r\n                    mode='outline'\r\n                    >\r\n                        <div className = 'card_author_content'>\r\n                            <SimpleCell\r\n                            disabled\r\n                            className=\"cell_card_author_content\"\r\n                            description = {timestampToDays(sign.datetime)}\r\n                            before = { <Avatar size = {36} src = {sign._from.photo} /> }\r\n                            after = {(share && sign.media != '') && <IconButton\r\n                            onClick = {()=>shareToHistory(sign.media)}\r\n                            ><Icon16Share/></IconButton>}\r\n                            >\r\n                                {sign._from.name}\r\n                            </SimpleCell>\r\n                        </div>\r\n                        <div className = 'card_main_content'>\r\n                            {sign.media == '' ? \r\n                            <div className = 'card_main_content_text'>\r\n                                <Text weight=\"3\">\r\n                                    {sign.text}\r\n                                </Text>\r\n                            </div>\r\n                            :\r\n                            <div className = 'card_main_content_media'>\r\n                                <img \r\n                                className = 'media_image'\r\n                                src = {sign.media}\r\n                                />\r\n                            </div>\r\n                            }\r\n                        </div>\r\n                    </Card>\r\n                )\r\n            })}\r\n        </CardGrid>\r\n    )\r\n}","import { Icon56BlockOutline } from \"@vkontakte/icons\"\r\nimport { Group, Panel, PanelHeader, PanelHeaderBack, Placeholder, Spinner } from \"@vkontakte/vkui\"\r\nimport { useState, useEffect } from 'react'\r\nimport { useStorage } from \"../../hook/useStorage\"\r\nimport { SignatureList } from \"./SignatureList\"\r\nimport { server } from \"../../vars/consts\"\r\n\r\nexport const MySignatures = ({id}) => {\r\n    const [signatures, setSignatures] = useState([])\r\n    const [page, setPage] = useState(0)\r\n    const [load, setLoad] = useState(true)\r\n    let {\r\n        fetchedUser,\r\n        setActivePanel\r\n    } = useStorage()\r\n\r\n    useEffect(()=>{\r\n        async function fetchData(){\r\n            const req = await fetch(`${server}get_signatures`, {method:'POST', body:JSON.stringify(\r\n                {\r\n                    params:window.location.search,\r\n                    user_id:fetchedUser.id,\r\n                    page:0\r\n                }\r\n            )})\r\n            \r\n            if(req.ok){\r\n                let res = await req.json()\r\n                setSignatures(res.signatures)\r\n            }\r\n\r\n            setLoad(false)\r\n        }\r\n\r\n        fetchData()\r\n    }, [])\r\n\r\n    return(\r\n        <Panel\r\n        id = {id}\r\n        >\r\n            <PanelHeader left = {\r\n                <PanelHeaderBack onClick = {()=>{setActivePanel('default')}}/>\r\n            }>Мои автографы</PanelHeader>\r\n            <Group>\r\n                {load && \r\n                <Spinner size='regular' />\r\n                }\r\n\r\n                {(!load && signatures.length > 0) &&\r\n                <SignatureList signatures={signatures} share = {true}/>\r\n                }\r\n\r\n                {(!load && signatures.length == 0) &&\r\n                <Placeholder\r\n                icon={<Icon56BlockOutline />}\r\n                >\r\n                    У вас нет ни одного автографа\r\n                </Placeholder>\r\n                }\r\n            </Group>\r\n        </Panel>\r\n    )\r\n}","import { Icon56BlockOutline } from \"@vkontakte/icons\"\r\nimport { Group, Panel, Placeholder, Spinner, Gradient, Title, Text, Avatar, Button, PanelHeader, PanelHeaderBack } from \"@vkontakte/vkui\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useStorage } from \"../../hook/useStorage\"\r\nimport { server, declOfNum } from \"../../vars/consts\"\r\nimport { SignatureList } from \"./SignatureList\"\r\n\r\n\r\nexport const Profile = ({ id }) => {\r\n    const [thisUser, setThisUser] = useState(null)\r\n    const [signatures, setSignatures] = useState([])\r\n    const [load, setLoad] = useState(true)\r\n    const [page, setPage] = useState(0)\r\n    let {\r\n        activeProfile, setActivePanel, snack\r\n    } = useStorage()\r\n\r\n    useEffect(()=>{\r\n        async function fetchData(){\r\n            const req = await fetch(`${server}get_profile`, {method:'POST', body:JSON.stringify(\r\n                {\r\n                    params:window.location.search,\r\n                    user_id:activeProfile\r\n                }\r\n            )})\r\n            if(req.ok){\r\n                let res = await req.json()\r\n                if(!res.error){\r\n                    setSignatures(res.signatures)\r\n                    setThisUser(res.profile)\r\n                    setLoad(false)\r\n                }\r\n            }\r\n        }\r\n\r\n        fetchData()\r\n    }, [])\r\n\r\n    return(\r\n        <Panel id = {id}>\r\n            <PanelHeader\r\n            left = {<PanelHeaderBack onClick={()=>{setActivePanel('default')}}/>}\r\n            >Автографы</PanelHeader>\r\n            <Group>\r\n            {load && \r\n            <Spinner size = 'regular' />\r\n            }\r\n            {(!load && thisUser) && \r\n            <Gradient\r\n                style={{\r\n                    // margin: sizeX === SizeType.REGULAR ? \"-7px -7px 0 -7px\" : 0,\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    textAlign: \"center\",\r\n                    padding: 32,\r\n                  }}\r\n                >\r\n                    <Avatar size = {96} src = {thisUser.photo}/>\r\n                    <Title\r\n                    style={{ marginBottom: 8, marginTop: 20 }}\r\n                    level=\"2\"\r\n                    weight=\"2\"\r\n                    >\r\n                        {thisUser.name}\r\n                    </Title>\r\n                    {thisUser.count > 0 &&\r\n                    <Text style={{ marginBottom: 24, color: \"var(--text_secondary)\" }}>\r\n                        {`${thisUser.count} ${declOfNum(thisUser.count, ['автограф','автографа','автографов'])}`}\r\n                    </Text>\r\n                    }\r\n                    <Button onClick={()=>setActivePanel('new_signature')} size=\"l\">Оставить автограф</Button>\r\n                </Gradient>\r\n                }\r\n                {(!load && thisUser.count == 0) && \r\n                <Placeholder\r\n                header = 'Пусто'\r\n                icon = {<Icon56BlockOutline />}\r\n                >\r\n                    Здесь нет ни одного автографа\r\n                </Placeholder>\r\n                }\r\n\r\n                {(!load && thisUser.count > 0) && \r\n                <Group mode = 'plain'>\r\n                <SignatureList signatures={signatures} />\r\n                </Group>\r\n                }\r\n            </Group>\r\n            {snack}\r\n        </Panel>\r\n    )\r\n}","import { Icon16BrushOutline, Icon16ImageFilter, Icon16Picture, Icon16Text, Icon24PictureOutline, Icon24TextOutline } from \"@vkontakte/icons\"\r\nimport { Button, FormField, FormItem, FormLayout, Group, Panel, PanelHeader, PanelHeaderBack, Div, Tabs, TabsItem, Textarea, File, Slider, Snackbar, ScreenSpinner } from \"@vkontakte/vkui\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useStorage } from \"../../hook/useStorage\"\r\nimport { getBase64, server } from \"../../vars/consts\"\r\nimport { Paintable, PaintableRef } from 'paintablejs/react';\r\n\r\nimport styles from './NewSignature.css';\r\n\r\nimport './NewSignature.css'\r\n\r\n\r\nexport const NewSignature = ({ id }) => {\r\n    const [currentTab, setCurrentTab] = useState('text')\r\n    const [fileLoad, setFileLoad] = useState(false)\r\n    let {\r\n        setActivePanel, activeProfile, setSnack, setPopout\r\n    } = useStorage()\r\n\r\n    const [signValue, setSignValue] = useState('')\r\n    const [media, setMedia] = useState(null)\r\n\r\n    const [color, setColor] = useState('#000000')\r\n    const [active, setActive] = useState(true)\r\n    const [thickness, setThickness] = useState(5)\r\n    const [paint, setPaint] = useState(null)\r\n    // const paintableRef = useRef<PaintableRef>(null);\r\n\r\n    const loadImage = async (file) => {\r\n        setFileLoad(true)\r\n        let img_base64 = await getBase64(file).then(res=>{return res})\r\n        setMedia(img_base64)\r\n        setFileLoad(false)\r\n    }\r\n\r\n    const badLeave = () => {\r\n        setActivePanel('profile')\r\n        setSnack(\r\n            <Snackbar\r\n            onClose={()=>{setSnack(null)}}\r\n            >\r\n                Не удалось оставить автограф\r\n            </Snackbar>\r\n        )\r\n    }\r\n\r\n    const goodLeave = () => {\r\n        setActivePanel('profile')\r\n        setSnack(\r\n            <Snackbar\r\n            onClose={()=>{setSnack(null)}}\r\n            >\r\n                Автограф был оставлен\r\n            </Snackbar>\r\n        )\r\n    }\r\n\r\n    const post_signature = async () => {\r\n        setPopout(<ScreenSpinner size=\"large\" />)\r\n        if(currentTab == 'text'){\r\n            const req = await fetch(`${server}add_text_signature`, {method:'POST', body:JSON.stringify(\r\n                {\r\n                    params:window.location.search,\r\n                    user_id:activeProfile,\r\n                    text:signValue\r\n                }\r\n            )})\r\n            if (req.ok) {\r\n                let res = await req.json()\r\n                if(res.error){\r\n                    badLeave()\r\n                }else{\r\n                    goodLeave()\r\n                }\r\n            }else{\r\n                badLeave()\r\n            }\r\n        }else if(currentTab == 'paint'){\r\n            setActive(true)\r\n            setTimeout(async () => {\r\n            console.log(paint)\r\n            const req = await fetch(`${server}add_media_signature`, {method:'POST', body:JSON.stringify(\r\n                {\r\n                    params:window.location.search,\r\n                    user_id:activeProfile,\r\n                    media:paint\r\n                }\r\n            )})\r\n            if (req.ok) {\r\n                let res = await req.json()\r\n                if(res.error){\r\n                    badLeave()\r\n                }else{\r\n                    goodLeave()\r\n                }\r\n            }else{\r\n                badLeave()\r\n            }\r\n            }, 500);\r\n        }else{\r\n            const req = await fetch(`${server}add_media_signature`, {method:'POST', body:JSON.stringify(\r\n                {\r\n                    params:window.location.search,\r\n                    user_id:activeProfile,\r\n                    media:media\r\n                }\r\n            )})\r\n            if (req.ok) {\r\n                let res = await req.json()\r\n                if(res.error){\r\n                    badLeave()\r\n                }else{\r\n                    goodLeave()\r\n                }\r\n            }else{\r\n                badLeave()\r\n            }\r\n        }\r\n\r\n        setPopout(null)\r\n    }\r\n\r\n    useEffect(()=>{\r\n        function save(){\r\n            setTimeout(() => {\r\n                setActive(false)\r\n                setActive(true)\r\n                save()\r\n            }, 2000);\r\n        }\r\n        save()\r\n    }, [])\r\n\r\n    return (\r\n        <Panel id = {id}>\r\n            <PanelHeader left = {\r\n            <PanelHeaderBack\r\n            onClick={()=>{setActivePanel('profile')}}\r\n            />\r\n             }>Отправить автограф</PanelHeader>\r\n            \r\n            <Group>\r\n                <Tabs>\r\n                    <TabsItem\r\n                    selected = {currentTab === 'text'}\r\n                    onClick = {()=>{\r\n                        setActive(false)\r\n                        setTimeout(() => {\r\n                            setCurrentTab('text')\r\n                        }, 80);\r\n                    }}\r\n                    >\r\n                        Текстовый\r\n                    </TabsItem>\r\n                    <TabsItem\r\n                    selected = {currentTab === 'media'}\r\n                    onClick = {()=>{\r\n                        setActive(false)\r\n                        setTimeout(() => {\r\n                            setCurrentTab('media')\r\n                        }, 80);\r\n                    }}\r\n                    >\r\n                        Медиа\r\n                    </TabsItem>\r\n                    <TabsItem\r\n                    selected = {currentTab === 'paint'}\r\n                    onClick = {()=>{\r\n                        setActive(true)\r\n                        setTimeout(() => {\r\n                            setCurrentTab('paint')\r\n                        }, 80);\r\n                    }}\r\n                    >\r\n                        Рисунок\r\n                    </TabsItem>\r\n                </Tabs>\r\n                {currentTab === 'text' &&\r\n                <Group mode='plain'>\r\n                    <FormLayout>\r\n                        <FormItem top = 'Текстовый автограф' bottom = {`${signValue.length}/1000`}>\r\n                            <Textarea \r\n                            placeholder='Здесь был Павгро' \r\n                            maxLength={1000}\r\n                            onChange={(e)=>setSignValue(e.currentTarget.value)}\r\n                            />\r\n                        </FormItem>\r\n                    </FormLayout>\r\n\r\n                    <Div>\r\n                        <Button disabled = {signValue.length == 0} size='l' sizeY=\"regular\" stretched\r\n                        onClick={post_signature}\r\n                        >Оставить автограф</Button>\r\n                    </Div>\r\n                </Group>\r\n                }\r\n\r\n                {currentTab === 'media' &&\r\n                <Group mode='plain'>\r\n                <div className = 'flexbox_fileinput'>\r\n                <FormLayout>\r\n                    <FormItem top = 'Фотография' bottom = \"Загрузите любую фотографию с вашего устройства\">\r\n                        <File\r\n                        loading={fileLoad}\r\n                        before = {<Icon24PictureOutline />}\r\n                        size = 'l'\r\n                        controlSize=\"l\"\r\n                        accept=\"image/*\"\r\n                        onChange={e=>loadImage(e.currentTarget.files[0])}\r\n                        />\r\n                    </FormItem>\r\n                </FormLayout>\r\n\r\n                <img className = 'preview_image' src = {media} />\r\n\r\n                </div>\r\n\r\n                <Div>\r\n                    <Button disabled = {media == null} size='l' sizeY=\"regular\" stretched\r\n                    onClick={post_signature}\r\n                    >Оставить автограф</Button>\r\n                </Div>\r\n            </Group>\r\n            }\r\n\r\n            {currentTab === 'paint' &&\r\n            <Group>\r\n                <div className=\"canvas_box\">\r\n                    <Paintable \r\n                    className=\"canvas_content\"\r\n                    width={756}\r\n                    height={378}\r\n                    color={color}\r\n                    thickness={thickness}\r\n                    // ref={paintableRef}\r\n                    onSave = {(image)=>{setPaint(image)}}\r\n                    image = {paint}\r\n                    active={active}\r\n                    >\r\n                        <div className='canvas-inner' />\r\n                    </Paintable>\r\n                </div>\r\n                <div className=\"painter_params\">\r\n                    <div className=\"flexbox_paint_item\">\r\n                        <input\r\n                        type='color'\r\n                        defaultValue={color}\r\n                        onChange = {(e)=>setColor(e.currentTarget.value)}\r\n                        />\r\n                        <label>{color}</label>\r\n                    </div>\r\n\r\n                    <div className=\"flexbox_paint_item\">\r\n                        <input \r\n                        type='range'\r\n                        min = {1}\r\n                        max = {30}\r\n                        defaultValue = {thickness}\r\n                        onChange = {e=>{setThickness(e.currentTarget.value)}}\r\n                        />\r\n                        <label>{thickness}</label>\r\n                    </div>\r\n                </div>\r\n\r\n                    <Div>\r\n                        <Button \r\n                        // disabled={paint == null}\r\n                        size='l'\r\n                        sizeY=\"regular\"\r\n                        onClick={()=>{\r\n                            setActive(false)\r\n                            setTimeout(() => {\r\n                                post_signature()\r\n                            }, 80);\r\n                        }}\r\n                        stretched>Оставить автограф</Button>\r\n                    </Div>\r\n            </Group>\r\n            }\r\n\r\n            </Group>\r\n        </Panel>\r\n    )\r\n}","import { Icon56InfoOutline } from \"@vkontakte/icons\"\r\nimport { FormItem, FormLayout, NativeSelect, Panel, PanelHeader, PanelHeaderBack, Group, Placeholder, Button, Div, ScreenSpinner } from \"@vkontakte/vkui\"\r\nimport { useState } from \"react\"\r\nimport { useStorage } from \"../../hook/useStorage\"\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { server } from \"../../vars/consts\";\r\n\r\n\r\nexport const Privacy = ({ id }) => {\r\n\r\n    let {\r\n        setActivePanel,\r\n        hideFriendsPlaceholder, setHideFriendsPlaceholder,\r\n        setPopout, defaultParams, setDefaultParams, \r\n        alreadySet, setAlreadySet\r\n    } = useStorage()\r\n\r\n    const [viewmode, setViewMode] = useState(defaultParams?.privacy?.view_mode)\r\n    const [postmode, setPostMode] = useState(defaultParams?.privacy?.post_mode)\r\n\r\n    const buttonTurnoff = () => {\r\n        bridge.send('VKWebAppRemoveFromProfile').then(data=>{\r\n            if(data.result){\r\n                setAlreadySet(false)\r\n            }\r\n        })\r\n    }\r\n\r\n    const openFriendsBridge = () => {\r\n        bridge.send(\"VKWebAppGetFriends\", {multi:true})\r\n        .then(async (data)=>{\r\n            setPopout(<ScreenSpinner size = 'large' />)\r\n            let friends = data.users\r\n            let ids = friends.map(f=>f.id)\r\n            const req = await fetch(`${server}edit_friends`, {method:'POST', body:JSON.stringify(\r\n                {\r\n                    params:window.location.search,\r\n                    ids:ids\r\n                }\r\n            )})\r\n            if(req.ok){\r\n                setHideFriendsPlaceholder(true)\r\n            }\r\n            setPopout(null)\r\n        })\r\n    }\r\n\r\n    const edit_viewmode = async (e) => {\r\n        let mode = e.currentTarget.value\r\n        setViewMode(mode)\r\n        setPopout(<ScreenSpinner size = 'large' />)\r\n        const req = await fetch(`${server}set_privacy`, {method:'POST', body:JSON.stringify(\r\n            {\r\n                params:window.location.search,\r\n                view_mode:mode,\r\n                post_mode:postmode\r\n            }\r\n        )})\r\n\r\n        let local_defaultParams = defaultParams\r\n        console.log(local_defaultParams)\r\n        local_defaultParams.privacy.view_mode = mode\r\n        setDefaultParams(local_defaultParams)\r\n\r\n        setPopout(null)\r\n    }\r\n\r\n    const edit_postmode = async (e) => {\r\n        let mode = e.currentTarget.value\r\n        setPostMode(mode)\r\n        setPopout(<ScreenSpinner size = 'large' />)\r\n        const req = await fetch(`${server}set_privacy`, {method:'POST', body:JSON.stringify(\r\n            {\r\n                params:window.location.search,\r\n                view_mode:viewmode,\r\n                post_mode:mode\r\n            }\r\n        )})\r\n\r\n        let local_defaultParams = defaultParams\r\n        local_defaultParams.privacy.post_mode = mode\r\n        setDefaultParams(local_defaultParams)\r\n\r\n        setPopout(null)\r\n    }\r\n\r\n    return(\r\n        <Panel id = {id}>\r\n            <PanelHeader left = {\r\n                <PanelHeaderBack onClick={()=>setActivePanel('default')}/>\r\n            }>Приватность</PanelHeader>\r\n            <Group>\r\n                <FormLayout>\r\n                    <FormItem top = 'Просмотр ваших автографов'>\r\n                        <NativeSelect value={viewmode} onChange = {edit_viewmode}>\r\n                            <option value = 'all'>Доступно всем</option>\r\n                            <option value = 'friends'>Доступно только друзьям</option>\r\n                            <option value = 'noone'>Доступно только мне</option>\r\n                        </NativeSelect>\r\n                    </FormItem>\r\n                    <FormItem top = 'Создание новых автографов'>\r\n                        <NativeSelect value={postmode} onChange = {edit_postmode}>\r\n                            <option value = 'all'>Доступно всем</option>\r\n                            <option value = 'friends'>Доступно только друзьям</option>\r\n                            <option value = 'noone'>Никому не доступно</option>\r\n                        </NativeSelect>\r\n                    </FormItem>\r\n                </FormLayout>\r\n\r\n                {((viewmode == 'friends' || postmode == 'friends') && !hideFriendsPlaceholder) &&\r\n                <Placeholder\r\n                icon = {<Icon56InfoOutline />}\r\n                header = 'Обновите список своих друзей в приложении'\r\n                action={<Button onClick = {openFriendsBridge} size = 's'>Разрешить доступ к друзьям</Button>}\r\n                >\r\n                    Приложение будет проверять является ли пользовательу вашим другом только по тому списку, который вы нам предоставите\r\n                </Placeholder>\r\n                }\r\n                \r\n                {/* {alreadySet &&\r\n                <Div>\r\n                    <Button stretched size=\"l\">Удалить кнопку из профиля</Button>\r\n                </Div>\r\n                } */}\r\n            </Group>\r\n        </Panel>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot, ConfigProvider, SplitLayout, SplitCol } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport { useStorage } from './hook/useStorage';\nimport { Default } from './panels/Default/Default';\nimport { MySignatures } from './panels/Profile/MySignatures';\nimport { Profile } from './panels/Profile/Profile';\nimport { NewSignature } from './panels/NewSignature/NewSignature';\nimport { Privacy } from './panels/Privacy/Privacy';\n\nconst App = () => {\n\tlet {\n\t\tactivePanel,\n\t\tpopout, setPopout\n\t} = useStorage()\n\tconst [scheme, setScheme] = useState('bright_light')\n\tconst [fetchedUser, setUser] = useState(null);\n\n\tuseEffect(() => {\n\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t  setScheme(data.scheme)\n\t\t\t}\n\t\t  });\n\n\t}, []);\n\n\n\treturn (\n\t\t<ConfigProvider scheme={scheme}>\n\t\t\t<AdaptivityProvider>\n\t\t\t\t<AppRoot>\n\t\t\t\t\t<SplitLayout popout={popout}>\n\t\t\t\t\t\t<SplitCol>\n\t\t\t\t\t\t\t<View activePanel={activePanel}>\n\t\t\t\t\t\t\t\t<Home id='home' />\n\t\t\t\t\t\t\t\t<Default id = 'default'/>\n\t\t\t\t\t\t\t\t<MySignatures id = 'my_signatures'/>\n\t\t\t\t\t\t\t\t<Profile id = 'profile' />\n\t\t\t\t\t\t\t\t<NewSignature id = 'new_signature' />\n\t\t\t\t\t\t\t\t<Privacy id = 'privacy' />\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</SplitCol>\n\t\t\t\t\t</SplitLayout>\n\t\t\t\t</AppRoot>\n\t\t\t</AdaptivityProvider>\n\t\t</ConfigProvider>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\nimport StorageProvider from \"./hoc/StorageProvider\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(\n  <StorageProvider>\n    <App />\n  </StorageProvider>\n, document.getElementById(\"root\"));\n\n// if (process.env.NODE_ENV === \"development\") {\n//   import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n// }\n"],"sourceRoot":""}